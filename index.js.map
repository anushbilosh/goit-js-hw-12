{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nconst myApiKey = '50358414-c92bcdcb4052cd5a2ab490d79';\nexport const PER_PAGE = 15;\n\nexport async function getImagesByQuery(query, page) {\n    const options = {\n    params: {\n        key: myApiKey,\n        q: query,\n        page: page,\n        per_page: PER_PAGE,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        },\n    };\n    try {\n        const res = await axios.get('', options);\n        return res.data;\n    } \n    catch (error) {\n        console.log(error);\n        throw error;\n    }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst galleryContainer = document.querySelector('.gallery');\nconst loaderElement = document.querySelector('.loader');\nexport const loadBtnElem = document.querySelector('.load-btn');\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\n\nexport function createGallery(images) {\n    const markup = images\n    .map(image => {\n        return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${image.webformatURL}\"\n                    alt=\"${image.tags}\"\n                />\n            </a>\n            <div class=\"image-info\">\n                <p><b>Likes:</b> ${image.likes}</p>\n                <p><b>Views:</b> ${image.views}</p>\n                <p><b>Comments:</b> ${image.comments}</p>\n                <p><b>Downloads:</b> ${image.downloads}</p>\n            </div>\n        </li>`;\n    })\n    .join(''); \n\n    galleryContainer.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n    loaderElement.classList.add('active');\n}\n\nexport function hideLoader() {\n    loaderElement.classList.remove('active');\n}\n\nexport function hideLoadMoreButton() {\n    loadBtnElem.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() {\n    loadBtnElem.classList.remove('hidden');\n}\n\nexport function scrollGallerySmoothly() {\n    const firstCard = document.querySelector('.gallery-item');\n    if (!firstCard) return;\n\n    const cardHeight = firstCard.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\n","import './css/styles.css';\nimport { getImagesByQuery, PER_PAGE } from './js/pixabay-api.js';\nimport { createGallery, clearGallery, showLoader, hideLoader, hideLoadMoreButton, showLoadMoreButton, loadBtnElem, scrollGallerySmoothly } from './js/render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\nconst input = form.elements['search-text'];\n\nlet userValue;\nlet currentPage = 0;\nlet maxPage = 0;\n\n\nform.addEventListener('submit', handleUserQuery)\n\n\nasync function handleUserQuery (event) {\n    event.preventDefault(); \n\n    userValue = input.value.trim();\n\n    if (userValue === '') {\n        iziToast.warning({\n            message: 'Please enter a search term!',\n            position: 'topRight',\n            });\n            return;\n        }\n    \n    showLoader();\n    \n    clearGallery();\n    try {\n        currentPage = 1;\n        const data = await getImagesByQuery(userValue, currentPage);\n        \n        maxPage = Math.ceil(data.totalHits / PER_PAGE);\n        updateLoadBtn ()\n        \n        if (currentPage === maxPage) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'bottomRight',\n                });\n                return;\n        }\n\n        if (data.hits.length === 0) {\n            iziToast.info({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'bottomRight',\n            });\n            return;\n        }\n    \n        createGallery(data.hits);\n        \n    } catch (error) {\n        iziToast.error({\n        message: 'Something went wrong. Please try again later.',\n        position: 'bottomRight',\n        });\n    } finally {\n        hideLoader();\n    }\n}\n\nloadBtnElem.addEventListener('click', handleUserLoad)\n\nasync function handleUserLoad (event) {\n    event.preventDefault(); \n\n    showLoader();\n    \n    try {\n        currentPage += 1;\n        updateLoadBtn ()\n        const data = await getImagesByQuery(userValue, currentPage);\n    \n        if (data.hits.length === 0) {\n            iziToast.info({\n            message: 'Sorry, there are no images matching your search query. Please try again!',\n            position: 'bottomRight',\n            });\n            return;\n        }\n\n        if (currentPage === maxPage) {\n            iziToast.info({\n                message: \"We're sorry, but you've reached the end of search results.\",\n                position: 'bottomRight',\n                });\n                return;\n        }\n\n        createGallery(data.hits);\n        scrollGallerySmoothly();\n    } catch (error) {\n        iziToast.error({\n        message: 'Something went wrong. Please try again later.',\n        position: 'bottomRight',\n        });\n    } finally {\n        hideLoader();\n    }\n}\n\nfunction updateLoadBtn (){\nif (currentPage < maxPage) {\n    showLoadMoreButton()\n} else {\n    hideLoadMoreButton()\n}\n}"],"names":["axios","myApiKey","PER_PAGE","getImagesByQuery","query","page","options","error","galleryContainer","loaderElement","loadBtnElem","lightbox","SimpleLightbox","createGallery","images","markup","image","clearGallery","showLoader","hideLoader","hideLoadMoreButton","showLoadMoreButton","scrollGallerySmoothly","firstCard","cardHeight","form","input","userValue","currentPage","maxPage","handleUserQuery","event","iziToast","data","updateLoadBtn","handleUserLoad"],"mappings":"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"}